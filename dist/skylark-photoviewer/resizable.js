/**
 * skylark-photoviewer - A version of dat.gui.js  that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-photoviewer/
 * @license MIT
 */
define(["./domq","./constants","./utilities"],function(t,e,i){"use strict";const h=`html, body, .${e.NS}-modal, .${e.NS}-stage, .${e.NS}-button`;return{resizable(s,p,o,a,n){const l=t(`<div class="${e.NS}-resizable-handle ${e.NS}-resizable-handle-e"></div>`),x=t(`<div class="${e.NS}-resizable-handle ${e.NS}-resizable-handle-w"></div>`),d=t(`<div class="${e.NS}-resizable-handle ${e.NS}-resizable-handle-s"></div>`),w=t(`<div class="${e.NS}-resizable-handle ${e.NS}-resizable-handle-n"></div>`),c=t(`<div class="${e.NS}-resizable-handle ${e.NS}-resizable-handle-se"></div>`),f=t(`<div class="${e.NS}-resizable-handle ${e.NS}-resizable-handle-sw"></div>`),r=t(`<div class="${e.NS}-resizable-handle ${e.NS}-resizable-handle-ne"></div>`),N=t(`<div class="${e.NS}-resizable-handle ${e.NS}-resizable-handle-nw"></div>`),g={e:l,s:d,se:c,n:w,w:x,nw:N,ne:r,sw:f};t(s).append(l,x,d,w,c,f,r,N);let S=!1,m=0,u=0,E={w:0,h:0,l:0,t:0},z={w:0,h:0,l:0,t:0},T={w:0,h:0,l:0,t:0},v=0,$=0,b=0,_="";const M=(i,a)=>{(a=a||window.event).preventDefault(),S=!0,e.PUBLIC_VARS.isResizing=!0,m="touchstart"===a.type?a.targetTouches[0].pageX:a.clientX,u="touchstart"===a.type?a.targetTouches[0].pageY:a.clientY,E={w:t(s).width(),h:t(s).height(),l:t(s).offset().left,t:t(s).offset().top},z={w:t(p).width(),h:t(p).height(),l:t(p).offset().left,t:t(p).offset().top},T={w:t(o).width(),h:t(o).height(),l:t(o).position().left,t:t(o).position().top},v=this.isRotated?(T.w-T.h)/2:0,$=this.isRotated?T.h:T.w,b=this.isRotated?T.w:T.h,_=i,t(h).css("cursor",i+"-resize"),e.$D.on(e.TOUCH_MOVE_EVENT+e.EVENT_NS,V).on(e.TOUCH_END_EVENT+e.EVENT_NS,R)},V=e=>{if((e=e||window.event).preventDefault(),S&&!this.isMaximized){const i="touchmove"===e.type?e.targetTouches[0].pageX:e.clientX,h="touchmove"===e.type?e.targetTouches[0].pageY:e.clientY,p=i-m,l=h-u,x=function(t,e,i){const h=-e+E.w>a?e+E.l:E.l+E.w-a,s=-i+E.h>n?i+E.t:E.t+E.h-n;return{e:{width:Math.max(e+E.w,a)+"px"},s:{height:Math.max(i+E.h,n)+"px"},se:{width:Math.max(e+E.w,a)+"px",height:Math.max(i+E.h,n)+"px"},w:{width:Math.max(-e+E.w,a)+"px",left:h+"px"},n:{height:Math.max(-i+E.h,n)+"px",top:s+"px"},nw:{width:Math.max(-e+E.w,a)+"px",height:Math.max(-i+E.h,n)+"px",top:s+"px",left:h+"px"},ne:{width:Math.max(e+E.w,a)+"px",height:Math.max(-i+E.h,n)+"px",top:s+"px"},sw:{width:Math.max(-e+E.w,a)+"px",height:Math.max(i+E.h,n)+"px",left:h+"px"}}[t]}(_,p,l);t(s).css(x);const d=function(e,i,h){const s=i+E.w>a?z.w-$+i-v:a-(E.w-z.w)-$-v,p=h+E.h>n?z.h-b+h+v:n-(E.h-z.h)-b+v,l=-i+E.w>a?z.w-$-i-v:a-(E.w-z.w)-$-v,x=-h+E.h>n?z.h-b-h+v:n-(E.h-z.h)-b+v,d=(s>0?t(o).position().left:t(o).position().left<0?t(o).position().left:0)-v,w=(p>0?t(o).position().top:t(o).position().top<0?t(o).position().top:0)+v,c=(l>0?t(o).position().left:t(o).position().left<0?t(o).position().left:0)-v,f=(x>0?t(o).position().top:t(o).position().top<0?t(o).position().top:0)+v;return{e:{left:s>=-v?(s-v)/2+"px":d>s?d+"px":s+"px"},s:{top:p>=v?(p+v)/2+"px":w>p?w+"px":p+"px"},se:{top:p>=v?(p+v)/2+"px":w>p?w+"px":p+"px",left:s>=-v?(s-v)/2+"px":d>s?d+"px":s+"px"},w:{left:l>=-v?(l-v)/2+"px":c>l?c+"px":l+"px"},n:{top:x>=v?(x+v)/2+"px":f>x?f+"px":x+"px"},nw:{top:x>=v?(x+v)/2+"px":f>x?f+"px":x+"px",left:l>=-v?(l-v)/2+"px":c>l?c+"px":l+"px"},ne:{top:x>=v?(x+v)/2+"px":f>x?f+"px":x+"px",left:s>=-v?(s-v)/2+"px":d>s?d+"px":s+"px"},sw:{top:p>=v?(p+v)/2+"px":w>p?w+"px":p+"px",left:l>=-v?(l-v)/2+"px":c>l?c+"px":l+"px"}}[e]}(_,p,l);t(o).css(d),this.isDoResize=!0}},R=()=>{e.$D.off(e.TOUCH_MOVE_EVENT+e.EVENT_NS,V).off(e.TOUCH_END_EVENT+e.EVENT_NS,R),e.PUBLIC_VARS.isResizing&&i.setGrabCursor({w:$,h:b},{w:t(p).width(),h:t(p).height()},p),S=!1,e.PUBLIC_VARS.isResizing=!1,t(h).css("cursor","");const s=this.getImageScaleToStage(t(p).width(),t(p).height());t.extend(this.imageData,{initWidth:this.img.width*s,initHeight:this.img.height*s,initLeft:(t(p).width()-this.img.width*s)/2,initTop:(t(p).height()-this.img.height*s)/2})};t.each(g,function(t,i){i.on(e.TOUCH_START_EVENT+e.EVENT_NS,function(e){M(t,e)})})}}});
//# sourceMappingURL=sourcemaps/resizable.js.map
