/**
 * skylark-photoviewer - A version of dat.gui.js  that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-photoviewer/
 * @license MIT
 */
define(["skylark-domx-eventer","skylark-domx-plugins-base","skylark-jquery","skylark-domx-plugins-interact/movable","skylark-domx-plugins-interact/resizable","./constants","./utilities"],function(t,i,e,s,o,h,n){"use strict";return i.Plugin.inherit({klassName:"Window",pluginName:"lark.domx.window",options:{selectors:{headerPane:"",contentPane:"",footerPane:"",titlebar:"",buttons:{fullscreen:".photoviewer-button-fullscreen",maximize:".photoviewer-button-maximize",minimize:".photoviewer-button-minimize",close:".photoviewer-button-close"}},fixedContent:!0,initMaximized:!1,movable:{dragHandle:!1},resizable:{minWidth:320,minHeight:320}},_construct:function(n,l){i.Plugin.prototype._construct.call(this,n,l),this.isOpened=!1,this.isMaximized=!1,this.$photoviewer=e(this._elm),this._velm=this.elmx(),this.options.movable&&(this._movable=new s(n,{handle:this.options.movable.dragHandle,starting:t=>{const i=h.CLASS_NS+"-button";return!e(t.target).closest(i).length&&(!h.PUBLIC_VARS.isResizing&&!this.isMaximized)}})),this.options.resizable&&(this._resizable=new o(n,{handle:{border:{directions:{top:!0,left:!0,right:!0,bottom:!0,topLeft:!0,topRight:!0,bottomLeft:!0,bottomRight:!0},classes:{all:`${h.NS}-resizable-handle`,top:`${h.NS}-resizable-handle-n`,left:`${h.NS}-resizable-handle-w`,right:`${h.NS}-resizable-handle-e`,bottom:`${h.NS}-resizable-handle-s`,topLeft:`${h.NS}-resizable-handle-nw`,topRight:`${h.NS}-resizable-handle-ne`,bottomLeft:`${h.NS}-resizable-handle-sw`,bottomRight:`${h.NS}-resizable-handle-se`}}},constraints:{minWidth:this.options.resizable.minWidth,minHeight:this.options.resizable.minHeight},started:function(){h.PUBLIC_VARS.isResizing=!0},moving:function(t){},stopped:function(){h.PUBLIC_VARS.isResizing=!1}})),this.$close=this._velm.$(this.options.selectors.buttons.close),this.$maximize=this._velm.$(this.options.selectors.buttons.maximize),this.$minimize=this._velm.$(this.options.selectors.buttons.minimize),this.$fullscreen=this._velm.$(this.options.selectors.buttons.fullscreen),this.$close.off(h.CLICK_EVENT+h.EVENT_NS).on(h.CLICK_EVENT+h.EVENT_NS,t=>{this.close()}),this.$fullscreen.off(h.CLICK_EVENT+h.EVENT_NS).on(h.CLICK_EVENT+h.EVENT_NS,()=>{this.fullscreen()}),this.$maximize.off(h.CLICK_EVENT+h.EVENT_NS).on(h.CLICK_EVENT+h.EVENT_NS,()=>{this.maximize()}),this.$photoviewer.off(h.KEYDOWN_EVENT+h.EVENT_NS).on(h.KEYDOWN_EVENT+h.EVENT_NS,t=>{this._keydown(t)}),h.$W.on(h.RESIZE_EVENT+h.EVENT_NS,()=>{t.resized(this._elm)})},close:function(){this.trigger("closing",this),this.$photoviewer.remove(),this.isOpened=!1,this.isMaximized=!1,e(h.CLASS_NS+"-modal").length||(this.options.fixedContent&&e("html").css({overflow:"","padding-right":""}),this.options.multiInstances&&(h.PUBLIC_VARS.zIndex=this.options.zIndex),h.$W.off(h.RESIZE_EVENT+h.EVENT_NS)),this.trigger("closed",this)},maximize:function(){if(this.$photoviewer.get(0).focus(),this.isMaximized){this.$photoviewer.removeClass(h.NS+"-maximize");const t=(h.$W.width()-this.options.modalWidth)/2+h.$D.scrollLeft(),i=(h.$W.height()-this.options.modalHeight)/2+h.$D.scrollTop();this.$photoviewer.css({width:this.modalData.width?this.modalData.width:this.options.modalWidth,height:this.modalData.height?this.modalData.height:this.options.modalHeight,left:this.modalData.left?this.modalData.left:t,top:this.modalData.top?this.modalData.top:i}),this.isMaximized=!1}else this.modalData={width:this.$photoviewer.width(),height:this.$photoviewer.height(),left:this.$photoviewer.offset().left,top:this.$photoviewer.offset().top},this.$photoviewer.addClass(h.NS+"-maximize"),this.$photoviewer.css({width:"100%",height:"100%",left:0,top:0}),this.isMaximized=!0;t.resized(this._elm)},fullscreen:function(){this.$photoviewer.get(0).focus(),n.requestFullscreen(this.$photoviewer[0])},_keydown:function(t){if(!this.options.keyboard)return!1;const i=t.keyCode||t.which||t.charCode;t.ctrlKey||t.metaKey,t.altKey||t.metaKey;switch(i){case 81:this.close()}}})});
//# sourceMappingURL=sourcemaps/window.js.map
